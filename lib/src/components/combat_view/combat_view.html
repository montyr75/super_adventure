<style>
  .announcement {
    font-size: 2em;
  }

  .button-bar {
    margin-top: 1em;
  }

  .monster-preview {
    max-height: 300px;
  }

  .combat-image {
    height: 200px;
  }

  .stats {
    margin-top: 1em;
  }
</style>

<div *ngIf="!inCombat" class="layout vertical center">
  <p class="announcement">You see a <span [safeInnerHtml]="game.monster.htmlName"></span>!</p>

  <img [src]="monsterImgPath" class="rounded monster-preview">

  <div class="layout horizontal button-bar">
    <button type="button" class="btn btn-dark loc" style="margin-right: 3em;" (click)="inCombat = true">Fight</button>
    <button type="button" class="btn btn-dark loc" (click)="flee()">Flee</button>
  </div>
</div>

<div *ngIf="inCombat" class="container">
  <div class="row">
    <div class="col-6 layout vertical center">
      <div class="announcement">{{game.player.name ?? 'Hero'}}</div>

      <div class="layout vertical center">
        <img [src]="heroImgPath" class="combat-image">
        <material-progress class="flex" [activeProgress]="percent(game.player.hp, game.player.maxHP)"></material-progress>
      </div>

      <div class="layout horizontal stats"><i class="ra ra-helmet ra-lg"></i> {{game.player.ac}}</div>

      <div class="layout vertical" style="width: 100%;">
        <button *ngFor="let weapon of game.player.weapons" type="button" class="layout vertical center btn btn-outline-danger" (click)="attack(weapon)" style="text-align: left;">
          <div>{{weapon.name}}</div>
          <div>+{{game.player.attackBonus}} / {{weapon.dmgFormula}}</div>
        </button>
      </div>
    </div>

    <div class="col">
      <div>{{message}}</div>
    </div>

    <div class="col layout vertical center">
      <div class="announcement" [safeInnerHtml]="game.monster.htmlName"></div>

      <div class="layout vertical center">
        <img [src]="monsterImgPath" class="combat-image">
        <material-progress class="flex" [activeProgress]="percent(game.monster.hp, game.monster.maxHP)"></material-progress>
      </div>

      <div class="layout horizontal stats"><i class="ra ra-helmet ra-lg"></i> {{game.monster.details.ac}}</div>
    </div>
  </div>
</div>